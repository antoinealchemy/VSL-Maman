<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merci pour votre commande ! - Rituel C.A.L.M.E</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '846721704360341');
    fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
           src="https://www.facebook.com/tr?id=846721704360341&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Meta Pixel Code -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito Sans', sans-serif;
            background: linear-gradient(135deg, #F0F9F8 0%, #E6F5F3 100%);
            color: #111111;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            width: 100%;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .success-header {
            background: linear-gradient(135deg, #3FB7A8, #50C4B3);
            color: white;
            padding: 50px 40px;
            text-align: center;
        }

        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .success-header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .success-header p {
            font-size: 18px;
            opacity: 0.95;
        }

        .content { padding: 40px; }

        .info-box {
            background: #F0F9F8;
            border-left: 4px solid #3FB7A8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .info-box h3 {
            color: #3FB7A8;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #5C5C5C;
            line-height: 1.6;
            font-size: 15px;
        }

        .next-steps { margin-bottom: 30px; }

        .next-steps h2 {
            color: #111111;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: #F9FAFB;
            border-radius: 8px;
        }

        .step-number {
            background: #3FB7A8;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content h4 {
            color: #111111;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .step-content p {
            color: #5C5C5C;
            font-size: 14px;
            line-height: 1.5;
        }

        .access-button {
            display: inline-block;
            background: linear-gradient(135deg, #3FB7A8, #50C4B3);
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 16px 40px;
            border-radius: 8px;
            text-decoration: none;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(63, 183, 168, 0.3);
            text-align: center;
            display: block;
        }

        .access-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(63, 183, 168, 0.4);
        }

        .alt-link {
            text-align: center;
            margin-top: 8px;
            font-size: 14px;
        }

        .alt-link a {
            color: #3FB7A8;
            text-decoration: none;
            font-weight: 600;
        }

        .alt-link a:hover { text-decoration: underline; }

        .support-section {
            background: #FFF9E6;
            border: 1px solid #FFE8A3;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            text-align: center;
        }

        .support-section h3 {
            color: #111111;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .support-section p {
            color: #5C5C5C;
            font-size: 15px;
            margin-bottom: 15px;
        }

        .support-email {
            color: #3FB7A8;
            font-weight: 600;
            text-decoration: none;
        }

        .support-email:hover { text-decoration: underline; }

        .footer {
            text-align: center;
            padding: 30px 40px;
            background: #F9FAFB;
            color: #888;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .success-header { padding: 40px 25px; }
            .success-icon { font-size: 60px; }
            .success-header h1 { font-size: 26px; }
            .success-header p { font-size: 16px; }
            .content { padding: 30px 25px; }
            .next-steps h2 { font-size: 20px; }
            .access-button { font-size: 1rem; padding: 14px 30px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="success-header">
            <div class="success-icon">‚úÖ</div>
            <h1>Paiement r√©ussi !</h1>
            <p>Bienvenue dans le programme Rituel C.A.L.M.E</p>
        </div>

        <div class="content">
            <div class="info-box">
                <h3>üìß Confirmation envoy√©e</h3>
                <p>Un email de confirmation vient d'√™tre envoy√© √† votre adresse avec tous les d√©tails de votre commande et vos acc√®s au programme.</p>
            </div>

            <div class="next-steps">
                <h2>üéØ Vos prochaines √©tapes</h2>

                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>V√©rifiez votre bo√Æte email</h4>
                        <p>Vous allez recevoir un email avec vos identifiants d'acc√®s dans les 5 prochaines minutes. Pensez √† v√©rifier vos spams !</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>T√©l√©chargez le guide PDF</h4>
                        <p>Obtenez imm√©diatement le guide complet du rituel C.A.L.M.E en cliquant sur le bouton ci-dessous.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Rejoignez la communaut√©</h4>
                        <p>Acc√©dez au groupe priv√© des mamans qui pratiquent le rituel et partagez votre exp√©rience</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Commencez d√®s aujourd'hui</h4>
                        <p>Prenez 3 minutes maintenant pour faire votre premier rituel. La transformation commence aujourd'hui !</p>
                    </div>
                </div>
            </div>

            <!-- Bouton de t√©l√©chargement direct du PDF -->
            <a href="Rituel-calme.pdf" class="access-button" download onclick="trackDownload()">
                üìò T√©l√©charger le guide PDF
            </a>
            <p class="alt-link">
                Ou <a href="Rituel-calme.pdf" target="_blank" rel="noopener" onclick="trackViewContent()">lire le guide dans votre navigateur</a>.
            </p>

            <div class="support-section">
                <h3>üí¨ Une question ?</h3>
                <p>Notre √©quipe est l√† pour vous accompagner</p>
                <a href="mailto:support@drsarahdumont.com" class="support-email" onclick="trackContact()">support@drsarahdumont.com</a>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2025 drsarahdumont.com - Tous droits r√©serv√©s</p>
            <p style="margin-top: 10px;">Garantie satisfait ou rembours√© 30 jours</p>
        </div>
    </div>

    <script>
        // ‚úÖ Fonction pour r√©cup√©rer les param√®tres d'URL
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // ‚úÖ R√©cup√©rer le payment_intent depuis l'URL
        var paymentIntentId = getUrlParameter('payment_intent');
        var paymentIntentClientSecret = getUrlParameter('payment_intent_client_secret');

        // ‚úÖ Track Purchase au chargement de la page
        window.addEventListener('load', function() {
            // On envoie l'√©v√©nement Purchase
            // Note: Id√©alement, r√©cup√©rez le montant exact depuis votre backend
            // Pour l'instant, on suppose 44‚Ç¨ (avec upsell) ou 17‚Ç¨
            
            var purchaseValue = 44.00; // Ajustez selon votre logique
            
            fbq('track', 'Purchase', {
                value: purchaseValue,
                currency: 'EUR',
                content_ids: ['rituel-calme'],
                contents: [
                    { id: 'rituel-calme', quantity: 1, item_price: 17.00 },
                    { id: 'pack-respiration', quantity: 1, item_price: 27.00 }
                ],
                content_type: 'product',
                num_items: 2,
                transaction_id: paymentIntentId || 'unknown'
            });
            
            console.log('‚úÖ Purchase event envoy√©:', purchaseValue, '‚Ç¨');
        });

        // ‚úÖ Track Lead (nouveau client captur√©)
        fbq('track', 'Lead', {
            content_name: 'Rituel C.A.L.M.E',
            content_category: 'Programme Bien-√™tre',
            value: purchaseValue,
            currency: 'EUR'
        });
        console.log('‚úÖ Lead event envoy√©');

        // ‚úÖ Track t√©l√©chargement du PDF
        function trackDownload() {
            fbq('track', 'Download', {
                content_name: 'Guide PDF Rituel C.A.L.M.E',
                content_type: 'product'
            });
            console.log('‚úÖ Download event envoy√©');
        }

        // ‚úÖ Track consultation du PDF dans le navigateur
        function trackViewContent() {
            fbq('track', 'ViewContent', {
                content_name: 'Guide PDF Rituel C.A.L.M.E',
                content_type: 'product'
            });
            console.log('‚úÖ ViewContent event envoy√©');
        }

        // ‚úÖ Track contact support
        function trackContact() {
            fbq('track', 'Contact', {
                content_name: 'Support email'
            });
            console.log('‚úÖ Contact event envoy√©');
        }
    </script>
</body>
</html>
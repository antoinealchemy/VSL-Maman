<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commande - Rituel C.A.L.M.E</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        :root {
            --teal-1: #3FB7A8;
            --teal-2: #50C4B3;
            --dark: #2a2a2a;
            --muted: #6B7280;
            --danger: #ff4444;
            --bg: #F9FAFB;
            --card-bg: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito Sans', sans-serif;
            background-color: var(--bg);
            color: #111111;
            min-height: 100vh;
            padding: 20px 15px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, var(--teal-1), var(--teal-2));
            color: white;
            padding: 30px 25px;
            text-align: center;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.95;
            font-weight: 400;
        }

        .trust-badges {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            font-size: 13px;
            flex-wrap: wrap;
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1.1fr;
            gap: 0;
            background: var(--card-bg);
            border-radius: 0 0 12px 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .product-info {
            padding: 40px;
            background: #fafafa;
            border-right: 1px solid #e5e5e5;
        }

        .product-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .product-subtitle {
            font-size: 15px;
            color: var(--muted);
            line-height: 1.5;
            margin-bottom: 25px;
        }

        #mockup {
            width: 100%;
            max-width: 480px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            margin: 25px 0 30px 0;
        }

        .items-list {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e5e5e5;
        }

        .item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .item:last-child {
            border-bottom: none;
        }

        .item-content {
            flex: 1;
        }

        .item-name {
            font-weight: 600;
            color: var(--dark);
            font-size: 15px;
            margin-bottom: 3px;
        }

        .item-value {
            font-weight: 600;
            color: var(--teal-1);
            font-size: 15px;
            white-space: nowrap;
            margin-left: 15px;
        }

        .value-total {
            padding: 15px 20px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }

        .value-total-text {
            font-size: 16px;
            color: var(--muted);
            text-decoration: line-through;
        }

        .offer-price {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, #f0fffe, #e6f9f7);
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid var(--teal-1);
        }

        .price-big {
            font-size: 52px;
            font-weight: 700;
            color: var(--teal-1);
            line-height: 1;
            margin-bottom: 8px;
        }

        .price-label {
            font-size: 14px;
            color: var(--muted);
            font-weight: 600;
        }

        .guarantee-block {
            background: #f0fffe;
            border: 2px solid var(--teal-1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .guarantee-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--teal-1);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .guarantee-text {
            font-size: 14px;
            color: var(--dark);
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .guarantee-link {
            color: var(--teal-1);
            text-decoration: underline;
            font-size: 13px;
            cursor: pointer;
            font-weight: 600;
        }

        .guarantee-link:hover {
            color: var(--teal-2);
        }

        .security-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            font-size: 12px;
            color: var(--muted);
            margin-top: 15px;
        }

        .security-badge {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checkout-section {
            padding: 40px;
            background: var(--card-bg);
        }

        .checkout-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .payment-badges {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--muted);
        }

        .lock-icon {
            color: var(--teal-1);
        }

        #express-checkout-element {
            margin-bottom: 20px;
        }

        .payment-divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }

        .payment-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e5e5e5;
        }

        .payment-divider span {
            background: var(--card-bg);
            padding: 0 12px;
            position: relative;
            color: var(--muted);
            font-size: 13px;
        }

        #payment-form {
            max-width: 100%;
        }

        .form-field {
            margin-bottom: 16px;
        }

        .form-field label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #111111;
            margin-bottom: 6px;
        }

        .form-field input {
            width: 100%;
            padding: 12px;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Nunito Sans', sans-serif;
            transition: border-color 0.2s;
        }

        .form-field input:focus {
            outline: none;
            border-color: var(--teal-1);
            box-shadow: 0 0 0 3px rgba(63, 183, 168, 0.1);
        }

        .form-field.optional label::after {
            content: " (facultatif)";
            font-weight: 400;
            color: var(--muted);
        }

        .name-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        #payment-element {
            margin-bottom: 20px;
        }

        .cta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 15px;
        }

        .order-summary {
            flex: 0 0 auto;
        }

        .order-total {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 3px;
        }

        .order-price {
            font-size: 24px;
            font-weight: 700;
            color: var(--teal-1);
        }

        .order-secure {
            font-size: 12px;
            color: var(--muted);
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 3px;
        }

        #submit {
            flex: 1;
            background: linear-gradient(135deg, var(--teal-1), var(--teal-2));
            color: white;
            font-size: 18px;
            font-weight: 700;
            padding: 16px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(63, 183, 168, 0.3);
        }

        #submit:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(63, 183, 168, 0.4);
        }

        #submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .commitment-text {
            font-size: 13px;
            color: var(--muted);
            text-align: center;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .commitment-link {
            color: var(--teal-1);
            text-decoration: underline;
            cursor: pointer;
        }

        .commitment-link:hover {
            color: var(--teal-2);
        }

        .checkout-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e5e5e5;
            font-size: 11px;
            color: var(--muted);
            flex-wrap: wrap;
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            color: var(--teal-1);
        }

        .spinner {
            border: 3px solid #e5e5e5;
            border-top: 3px solid var(--teal-1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #payment-message {
            color: var(--danger);
            margin-top: 12px;
            font-size: 14px;
            text-align: center;
        }

        .success-message {
            color: var(--teal-1) !important;
        }

        .testimonials {
            max-width: 1200px;
            margin: 40px auto 0;
            padding: 0 15px;
        }

        .testimonials-title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 30px;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .testimonial-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            border: 1px solid #e5e5e5;
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .testimonial-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid var(--teal-1);
        }

        .testimonial-author {
            flex: 1;
        }

        .testimonial-name {
            font-weight: 700;
            font-size: 15px;
            color: var(--dark);
            margin-bottom: 2px;
        }

        .testimonial-location {
            font-size: 13px;
            color: var(--muted);
        }

        .testimonial-stars {
            color: #FFA500;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .testimonial-headline {
            font-weight: 700;
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .testimonial-text {
            font-size: 14px;
            color: #4a4a4a;
            line-height: 1.6;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 20px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: 700;
            color: var(--muted);
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--dark);
        }

        .modal h2 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .modal p {
            font-size: 15px;
            line-height: 1.6;
            color: #4a4a4a;
            margin-bottom: 15px;
        }

        @media (max-width: 968px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }

            .product-info {
                border-right: none;
                border-bottom: 1px solid #e5e5e5;
            }

            .cta-row {
                flex-direction: column-reverse;
                align-items: stretch;
            }

            .order-summary {
                text-align: center;
                padding: 15px;
                background: #f9f9f9;
                border-radius: 8px;
            }

            #submit {
                width: 100%;
            }
        }

        @media (max-width: 520px) {
            body {
                padding: 15px 10px;
            }

            .header {
                padding: 25px 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .header p {
                font-size: 15px;
            }

            .product-info,
            .checkout-section {
                padding: 25px 20px;
            }

            #mockup {
                display: none;
            }

            .price-big {
                font-size: 42px;
            }

            .name-row {
                grid-template-columns: 1fr;
            }

            .testimonials-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∏ Rituel C.A.L.M.E</h1>
            <p>Retrouve ta s√©r√©nit√© en 3 minutes par jour</p>
            <div class="trust-badges">
                <div class="trust-badge">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM6.5 4.5v7l5-3.5-5-3.5z"/>
                    </svg>
                    Acc√®s imm√©diat
                </div>
                <div class="trust-badge">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                    </svg>
                    Paiement unique
                </div>
                <div class="trust-badge">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                    </svg>
                    Paiement 100% s√©curis√©
                </div>
            </div>
        </div>

        <div class="content-wrapper">
            <div class="product-info">
                <h2 class="product-title">Le Programme Complet</h2>
                <p class="product-subtitle">
                    Acc√®de imm√©diatement au rituel qui a aid√© 4 783 mamans √† passer leur stress de 8/10 √† 2/10 en seulement 3 semaines.
                </p>

                <img id="mockup" src="https://via.placeholder.com/480x320/3FB7A8/ffffff?text=Mockup+Programme" alt="Mockup - Guide Rituel CALME" loading="lazy">

                <div class="items-list">
                    <div class="item">
                        <div class="item-content">
                            <div class="item-name">Guide complet RITUEL CALME‚Ñ¢</div>
                        </div>
                        <div class="item-value">67‚Ç¨</div>
                    </div>
                    <div class="item">
                        <div class="item-content">
                            <div class="item-name">Version AUDIO guid√©e</div>
                        </div>
                        <div class="item-value">37‚Ç¨</div>
                    </div>
                    <div class="item">
                        <div class="item-content">
                            <div class="item-name">Guide de RECHUTE √âMOTIONNELLE</div>
                        </div>
                        <div class="item-value">27‚Ç¨</div>
                    </div>
                    <div class="item">
                        <div class="item-content">
                            <div class="item-name">CHECKLIST progression 21 jours</div>
                        </div>
                        <div class="item-value">16‚Ç¨</div>
                    </div>
                </div>

                <div class="value-total">
                    <div class="value-total-text">Valeur totale : 147‚Ç¨</div>
                </div>

                <div class="offer-price">
                    <div class="price-big">17‚Ç¨</div>
                    <div class="price-label">Paiement unique ‚Äî Acc√®s imm√©diat</div>
                </div>

                <div class="guarantee-block">
                    <div class="guarantee-badge">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.97 4.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                        </svg>
                        14 jours ‚Äî Satisfait ou rembours√©
                    </div>
                    <p class="guarantee-text">
                        Si ton stress n'a pas baiss√© d'au moins 4 points (ex: 8‚Üí4) apr√®s 3 semaines de pratique, nous te remboursons int√©gralement et t'envoyons en plus 20‚Ç¨ pour le temps investi.
                    </p>
                    <a class="guarantee-link" onclick="openModal('guarantee-modal')">En savoir plus</a>
                    
                    <div class="security-badges">
                        <div class="security-badge">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                            </svg>
                            Paiement 100% s√©curis√© (Stripe)
                        </div>
                        <div class="security-badge">
                            üí≥ Visa, Mastercard, Apple Pay, Google Pay
                        </div>
                    </div>
                </div>

                <p style="font-size: 12px; color: var(--muted); margin-top: 15px;">
                    Vos informations ne seront jamais revendues.
                </p>
            </div>

            <div class="checkout-section">
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Chargement du paiement s√©curis√©...</p>
                </div>
                
                <div id="payment-container" style="display: none;">
                    <div class="checkout-header">
                        <div class="payment-badges">
                            <span class="lock-icon">üîí</span>
                            <span>Paiement s√©curis√©</span>
                        </div>
                    </div>

                    <div id="express-checkout-element"></div>
                    
                    <div class="payment-divider" id="payment-divider">
                        <span>ou payer par carte</span>
                    </div>

                    <form id="payment-form">
                        <div class="form-field">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required placeholder="votre@email.com">
                        </div>

                        <div class="name-row">
                            <div class="form-field">
                                <label for="prenom">Pr√©nom</label>
                                <input type="text" id="prenom" name="prenom" required placeholder="Pr√©nom">
                            </div>

                            <div class="form-field optional">
                                <label for="nom">Nom</label>
                                <input type="text" id="nom" name="nom" placeholder="Nom">
                            </div>
                        </div>

                        <div id="payment-element"></div>
                        
                        <div class="cta-row">
                            <div class="order-summary">
                                <div class="order-total">Total √† payer</div>
                                <div class="order-price">17‚Ç¨</div>
                                <div class="order-secure">
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                    </svg>
                                    Paiement s√©curis√©
                                </div>
                            </div>
                            <button id="submit" type="submit">
                                <span id="button-text">Commander maintenant</span>
                            </button>
                        </div>
                        
                        <div class="commitment-text">
                            14 jours satisfait ou rembours√© ‚Äî Garantie double : remboursement + 20‚Ç¨ si pas d'am√©lioration<br>
                            <a class="commitment-link" onclick="openModal('terms-modal')">Voir les conditions</a>
                        </div>

                        <div id="payment-message"></div>
                    </form>

                    <div class="checkout-footer">
                        <span>Powered by Stripe</span>
                        <span>‚Ä¢</span>
                        <span>üîí SSL</span>
                        <span>‚Ä¢</span>
                        <span>PCI-DSS</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="testimonials">
        <h2 class="testimonials-title">Ce que disent les mamans qui ont essay√©</h2>
        <div class="testimonials-grid">
            <article class="testimonial-card">
                <div class="testimonial-header">
                    <img src="https://ui-avatars.com/api/?name=Sophie+Martinez&background=3FB7A8&color=fff" alt="Sophie Martinez" class="testimonial-avatar">
                    <div class="testimonial-author">
                        <div class="testimonial-name">Sophie Martinez</div>
                        <div class="testimonial-location">Lyon</div>
                    </div>
                </div>
                <div class="testimonial-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="testimonial-headline">J'ai enfin retrouv√© du souffle</div>
                <p class="testimonial-text">Je l'ai essay√© pendant 3 semaines et mon stress est pass√© d'un 9/10 √† environ 3/10. Le rituel ne prend que 3 minutes et pourtant il change tout ‚Äî j'ai recommenc√© √† profiter de mes soir√©es sans m'effondrer.</p>
            </article>

            <article class="testimonial-card">
                <div class="testimonial-header">
                    <img src="https://ui-avatars.com/api/?name=Marine+Lefevre&background=3FB7A8&color=fff" alt="Marine Lef√®vre" class="testimonial-avatar">
                    <div class="testimonial-author">
                        <div class="testimonial-name">Marine Lef√®vre</div>
                        <div class="testimonial-location">Paris</div>
                    </div>
                </div>
                <div class="testimonial-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="testimonial-headline">Simple, rapide, efficace</div>
                <p class="testimonial-text">Je n'y croyais pas au d√©but ‚Äî encore une m√©thode de plus. Mais en 2 semaines j'ai senti ma tension baisser, j'ai moins cri√© et j'ai retrouv√© l'envie de peindre le soir.</p>
            </article>

            <article class="testimonial-card">
                <div class="testimonial-header">
                    <img src="https://ui-avatars.com/api/?name=Celine+Dubois&background=3FB7A8&color=fff" alt="C√©line Dubois" class="testimonial-avatar">
                    <div class="testimonial-author">
                        <div class="testimonial-name">C√©line Dubois</div>
                        <div class="testimonial-location">Nantes</div>
                    </div>
                </div>
                <div class="testimonial-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="testimonial-headline">Moins de culpabilit√©, plus de pr√©sent</div>
                <p class="testimonial-text">Avant je passais mes journ√©es avec la boule au ventre. Maintenant je peux √™tre pr√©sente pour mes enfants sans m'√©puiser. Le guide de rechute m'a aid√©e quand j'ai craqu√©.</p>
            </article>

            <article class="testimonial-card">
                <div class="testimonial-header">
                    <img src="https://ui-avatars.com/api/?name=Audrey+Bernard&background=3FB7A8&color=fff" alt="Audrey Bernard" class="testimonial-avatar">
                    <div class="testimonial-author">
                        <div class="testimonial-name">Audrey Bernard</div>
                        <div class="testimonial-location">Marseille</div>
                    </div>
                </div>
                <div class="testimonial-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="testimonial-headline">Valeur incroyable pour le prix</div>
                <p class="testimonial-text">Ce petit programme a eu plus d'effet que des semaines de lecture d'articles. Pour 17‚Ç¨, c'est un cadeau que je me suis enfin permis, et je ne le regrette pas.</p>
            </article>
        </div>
    </section>

    <!-- Modals -->
    <div id="guarantee-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('guarantee-modal')">&times;</button>
            <h2>Notre Garantie Double</h2>
            <p><strong>Garantie 14 jours satisfait ou rembours√©</strong></p>
            <p>Nous sommes convaincus que le Rituel C.A.L.M.E va transformer ta gestion du stress. Si tu n'es pas satisfaite pour quelque raison que ce soit dans les 14 jours suivant ton achat, nous te remboursons int√©gralement.</p>
            
            <p><strong>Garantie r√©sultat + 20‚Ç¨</strong></p>
            <p>Si apr√®s 3 semaines de pratique r√©guli√®re (au moins 5 jours sur 7), ton niveau de stress n'a pas baiss√© d'au moins 4 points sur 10, non seulement nous te remboursons 100%, mais nous t'envoyons aussi 20‚Ç¨ suppl√©mentaires pour le temps que tu as investi.</p>
            
            <p><strong>Comment √ßa marche ?</strong></p>
            <p>Envoie-nous simplement un email √† support@rituelcalme.fr avec ton ressenti. Pas besoin de justification compliqu√©e. Nous proc√©dons au remboursement sous 48h.</p>
        </div>
    </div>

    <div id="terms-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('terms-modal')">&times;</button>
            <h2>Conditions G√©n√©rales</h2>
            <p><strong>Produit</strong></p>
            <p>Le Rituel C.A.L.M.E est un programme num√©rique comprenant un guide PDF complet, des versions audio guid√©es, un guide de gestion de rechute √©motionnelle, et une checklist de progression sur 21 jours.</p>
            
            <p><strong>Acc√®s</strong></p>
            <p>L'acc√®s au programme est imm√©diat apr√®s le paiement. Tu recevras un email avec tes identifiants de connexion √† l'espace membre dans les 5 minutes suivant ta commande.</p>
            
            <p><strong>Paiement</strong></p>
            <p>Le paiement est unique et s√©curis√© via Stripe. Prix : 17‚Ç¨ TTC. Aucun abonnement, aucun frais cach√©.</p>
            
            <p><strong>Garantie de remboursement</strong></p>
            <p>Tu b√©n√©ficies d'une garantie satisfait ou rembours√© de 14 jours, ainsi que d'une garantie r√©sultat sur 3 semaines (voir d√©tails dans la section Garantie).</p>
        </div>
    </div>

    <script>
        const API_URL = 'https://vsl-maman.vercel.app';
        const stripe = Stripe('pk_live_51SHSrhPW27FSnXRnz9dcKPTnhx0M2CmfOLFWIWZSolup0v8wlnabG0EYY6qLYLFBXcaInbXpGXjniRAuuub5tOIW00CaGLTKVe');

        let elements;

        // Modal functions
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // Close modal on outside click
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Initialize payment
        initialize();

        async function initialize() {
            try {
                console.log('üöÄ D√©but de l\'initialisation...');
                
                const response = await fetch(`${API_URL}/api/create-payment-intent`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                });

                console.log('üì° R√©ponse API re√ßue:', response.status);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('‚ùå Erreur API:', errorText);
                    throw new Error(`Erreur API: ${response.status}`);
                }

                const data = await response.json();
                console.log('‚úÖ Donn√©es re√ßues:', data);

                const { clientSecret } = data;

                if (!clientSecret) {
                    throw new Error('Client secret manquant');
                }

                // Configuration de l'apparence
                const appearance = {
                    theme: 'stripe',
                    variables: {
                        colorPrimary: '#3FB7A8',
                        colorBackground: '#ffffff',
                        colorText: '#111111',
                        colorDanger: '#ff4444',
                        fontFamily: 'Nunito Sans, sans-serif',
                        borderRadius: '8px',
                        spacingUnit: '4px'
                    }
                };

                // Initialiser Elements avec le clientSecret
                elements = stripe.elements({ 
                    appearance, 
                    clientSecret,
                });

                console.log('üé® Elements Stripe cr√©√©s');

                // Cr√©er l'Express Checkout Element
                const expressCheckoutOptions = {
                    buttonHeight: 48,
                    buttonTheme: {
                        applePay: 'black',
                        googlePay: 'black'
                    },
                    buttonType: {
                        googlePay: 'buy'
                    },
                    paymentMethods: {
                        applePay: 'always',
                        googlePay: 'always',
                        link: 'auto'
                    }
                };

                const expressCheckoutElement = elements.create('expressCheckout', expressCheckoutOptions);

                // V√©rifier quels moyens de paiement sont disponibles
                expressCheckoutElement.on('ready', ({ availablePaymentMethods }) => {
                    console.log('üí≥ Moyens de paiement disponibles:', availablePaymentMethods);
                    
                    if (availablePaymentMethods && Object.keys(availablePaymentMethods).length > 0) {
                        document.getElementById('express-checkout-element').style.display = 'block';
                        document.getElementById('payment-divider').style.display = 'block';
                    } else {
                        document.getElementById('express-checkout-element').style.display = 'none';
                        document.getElementById('payment-divider').style.display = 'none';
                    }
                });

                // G√©rer le clic sur Express Checkout
                expressCheckoutElement.on('confirm', async (event) => {
                    console.log('üîÑ Confirmation Express Checkout...');
                    
                    const { error: submitError } = await elements.submit();
                    if (submitError) {
                        showMessage(submitError.message);
                        return;
                    }

                    const email = document.getElementById('email').value || event.billingDetails?.email || '';
                    const name = event.billingDetails?.name || 'Client';

                    const { error } = await stripe.confirmPayment({
                        elements,
                        clientSecret,
                        confirmParams: {
                            return_url: `${window.location.origin}/success.html`,
                            receipt_email: email,
                            payment_method_data: {
                                billing_details: {
                                    name: name,
                                    email: email
                                }
                            }
                        },
                    });

                    if (error) {
                        showMessage(error.message);
                    }
                });

                // Monter l'Express Checkout Element
                expressCheckoutElement.mount('#express-checkout-element');
                console.log('üì± Express Checkout mont√©');

                // Cr√©er le Payment Element classique
                const paymentElementOptions = {
                    layout: {
                        type: 'tabs',
                        defaultCollapsed: false,
                    },
                    fields: {
                        billingDetails: {
                            name: 'never',
                            email: 'never',
                            phone: 'never',
                            address: 'never'
                        }
                    }
                };
                
                const paymentElement = elements.create('payment', paymentElementOptions);
                paymentElement.mount('#payment-element');
                console.log('üí≥ Payment Element mont√©');

                // Afficher le formulaire
                document.getElementById('loading').style.display = 'none';
                document.getElementById('payment-container').style.display = 'block';
                console.log('‚ú® Interface affich√©e');

            } catch (error) {
                console.error('üí• Erreur compl√®te:', error);
                document.getElementById('loading').innerHTML = `
                    <p style="color: #ff4444; text-align: center; margin-bottom: 10px;">Une erreur est survenue lors du chargement du paiement.</p>
                    <p style="color: #6B7280; font-size: 14px; text-align: center; margin-bottom: 20px;">${error.message}</p>
                    <button onclick="location.reload()" style="padding: 12px 24px; background: #3FB7A8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        R√©essayer
                    </button>
                `;
            }
        }

        document.getElementById('payment-form').addEventListener('submit', handleSubmit);

        async function handleSubmit(e) {
            e.preventDefault();
            setLoading(true);

            const email = document.getElementById('email').value;
            const prenom = document.getElementById('prenom').value;
            const nom = document.getElementById('nom').value;
            const fullName = nom ? `${prenom} ${nom}` : prenom;

            const { error } = await stripe.confirmPayment({
                elements,
                confirmParams: {
                    return_url: `${window.location.origin}/success.html`,
                    receipt_email: email,
                    payment_method_data: {
                        billing_details: {
                            name: fullName,
                            email: email
                        }
                    }
                },
            });

            if (error) {
                if (error.type === "card_error" || error.type === "validation_error") {
                    showMessage(error.message);
                } else {
                    showMessage("Une erreur inattendue est survenue.");
                }
            }

            setLoading(false);
        }

        function showMessage(messageText) {
            const messageContainer = document.querySelector("#payment-message");
            messageContainer.textContent = messageText;
            messageContainer.classList.remove('success-message');
            
            setTimeout(() => {
                messageContainer.textContent = "";
            }, 4000);
        }

        function setLoading(isLoading) {
            const submitButton = document.querySelector("#submit");
            const buttonText = document.querySelector("#button-text");
            
            if (isLoading) {
                submitButton.disabled = true;
                buttonText.textContent = "Traitement en cours...";
            } else {
                submitButton.disabled = false;
                buttonText.textContent = "Commander maintenant";
            }
        }
    </script>
</body>
</html>